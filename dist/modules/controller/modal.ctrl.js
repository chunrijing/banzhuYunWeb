"use strict";angular.module("core").controller("modalCtrl",["$scope","$http","$uibModalInstance","items","$timeout","commonService","$stateParams",function(t,e,o,i,a,n,s){n.comDetails({scope:i.scope,componentId:i.componentId}).then(function(e){var o=e.data,i=[];t.list=e.data,t.list.attachment.map(function(t){(t.originalName.match(".png")||t.originalName.match(".jpg")||t.originalName.match(".jpeg")||t.originalName.match(".gif"))&&i.push(t)}),t.list.attachment=i,t.status=BzCloudComp.GetCompType(o.subClassName,o.guid,o.md5,o.epId,o.originEpId,o.lastestClientVersion)}),t.otherList=JSON.parse(BzCloudComp.GetCompDetail(i.componentId)).detail,t.selected={item:t.items},t.down=function(e,a,s,m,l){BzCloudComp.DownloadComp(e,a,s,m,l),n.comDetails({scope:i.scope,componentId:i.componentId}).then(function(e){var o=e.data;t.list=e.data,t.status=BzCloudComp.GetCompType(o.subClassName,o.guid,o.md5,o.epId,o.originEpId,o.lastestClientVersion);t.status});var r={componentId:e,epId:a,orgEpId:s,status:t.status};o.close(r)},t.apply=function(t,e,i,a){BzCloudComp.UseComp(t,e,i,a),o.close()},t.cancel=function(){o.dismiss("cancel")},t.$on("listrepeatFinish",function(){a(function(){$(".preview-small").map(function(t,e){$(e).children("span:first-of-type").find("img").css({borderColor:"red"});var o=$(e).children("span:first-of-type").find("img").attr("src");$(e).prev(".preview-big").find("img").attr("src",o)}),$(".component-modal .modal-left li .preview-small span").hover(function(){$(".component-modal .modal-left li .preview-small span img").css({borderColor:"#ddd"}),$(this).find("img").css({borderColor:"red"});var t=$(this).find("img").attr("src");$(this).parent().siblings().find("img").attr("src",t)})},10)}),n.heartBeat()}]);