"use strict";angular.module("core").controller("largePatternCtrl",["$scope","$http","$rootScope","$uibModal","commonService","$timeout","$compile","$state",function(e,t,s,n,i,l,a,o){function r(){var t={componentDisplayName:e.componentDisplayName,status:e.status,compClassId:e.compClassId,subClassId:e.subClassId,typeIds:e.typeIds,brandIds:e.brandIds,styleIds:e.styleIds};i.getTypeStyle(t).then(function(t){var s=t.data,n=[],i=[];if(void 0!=s.compClassInfos&&null!=s.compClassInfos&&0!=s.compClassInfos.length)if(null==e.compClassId&&(e.typeList=s.compClassInfos),null==s.compClassInfos[0].compClassName){e.isType=!1;var l=s.compClassInfos[0].subClassInfo;angular.forEach(l,function(t,s){null==t.parentId?(n.push(t),e.sTypeList=n):(i.push(t),e.types=i)}),c(),null!=e.compClassId&&null==e.subClassId&&0!=e.sTypeList.length?(e.isSType=!0,e.isTypes=!1):e.isSType=!1,null!=e.compClassId&&null!=e.subClassId&&null==e.typeIds&&0!=e.sTypeList.length?e.isTypes=!0:e.isTypes=!1}else e.isType=!0,e.isSType=!1,e.isTypes=!1;else e.isType=!1,e.isSType=!1,e.isTypes=!1;void 0==s.brands||null==s.brands||0==s.brands.length?(e.isBrand=!1,e.filterDown=!1,x=1):(e.isBrand=!0,e.filterDown=!0,x=0,e.brandsList=s.brands),void 0==s.styles||null==s.styles||0==s.styles.length?(e.isStyle=!1,L=1):(L=0,e.isStyle=!0,e.styleList=s.styles),p()})}function c(){var t=[];if(e.types&&e.types.length>0)for(var s=0;s<e.types.length;s++)for(var n=0;n<e.sTypeList.length;n++)e.sTypeList[n].subClassId==e.subClassId&&e.types[s].parentId==e.sTypeList[n].subClassId&&t.push(e.types[s]);e.typesList=t}function p(){l(function(){$(".filter-infoList").length>2?($(".filter-down").addClass("activeShow"),$(".filter-down").find(".moreSelect").html("更多选项"),e.filterDown=!0,e.isBrand=!1):e.filterDown=!1,u()},.1)}function d(){$(".component-info .clearfix .preview-big>img").attr({src:"",_src:""}),r(),$(".component-base .component-info h4").length>=0&&$(".component-base .component-info h4").remove();var t=++e.slideListId;layer.load(2,{shade:!1}),e.currentPage=1,i.largePattern({componentDisplayName:e.componentDisplayName,status:e.status,compClassId:e.compClassId,subClassId:e.subClassId,typeIds:e.typeIds,brandIds:e.brandIds,styleIds:e.styleIds,currentPage:e.currentPage,pageSize:k}).then(function(s){if(u(),t<e.slideListId)return console.log("This XHR id:",t),console.log("Global XHR id:",e.slideListId),!1;setTimeout(function(){layer.closeAll("loading")},10),e.componentList=s.data.itemList,e.pageCount=s.data.pageCount,y(e.componentList),e.bigTotalItems=s.data.totalRowCount;0==e.componentList.length?($(".component-base .pagination").hide(),$(".component-base .page").hide(),$(".component-base .component-info").append("<h4 style='margin: 15% 0 0 43%;'>没有找到相关构件</h4>")):($(".component-base .pagination").show(),$(".component-base .page").show()),u()})}function f(){$(".check-box").hide(),$(".filter-infoList").css({border:"none"}),$(".filter-infoList .filter-ele").css({"max-height":"40px",overflow:"hidden"}),$(".selectTitle").css({height:"40px",background:""}),$(".btns-item").css({display:"none"}),$(".checkMore").attr("data-switch","off"),$(".filter-infoList .filter-ele").children().find(".check-box input").prop("checked",!1),$(".filter-more").addClass("showMore"),$(".filter-infoList .filter-more").find(".glyphicon-menu-up").css({transform:"rotate(180deg)"}),$(".filter-infoList .filter-more").find(".moreBtn").text("更多"),$(".filter-down").addClass("activeShow"),$(".filter-down").find(".moreSelect").html("更多选项"),e.brand_moreBtn=null,e.style_moreBtn=null,e.types_moreBtn=null,u()}function h(){$(".ltype").prev().remove(),$(".ltype").remove(),$(".stype").prev().remove(),$(".stype").remove(),$(".selectType").prev().remove(),$(".selectType").remove(),null==e.componentDisplayName?e.isBlock=!1:e.isBlock=!0}function u(t){var s=$(".component-filter .filter-more"),n=0;$(s).each(function(){var e="",t=($(this).parents(".filter-infoList"),$(this).parents(".filter-condition")),s=$(this).parents(".filter-tool").siblings(".filter-ele");e=$(s).find("span");var i=$(s).find(".check-box").css("display"),l=$(t).width()-186;e.length<1?n=1:($(e).width()+12)*$(e).length<l||"none"!=i?$(this).hide():$(this).css("display","inline-block")}),e.$$phase||e.$apply(),n&&!t&&setTimeout(function(){u(!0)},10)}function m(){return B=$(".dump-inp input").val()}function y(e){e.map(function(e){0==e.attachmentInfo.length&&(e.attachmentInfo[0]={},e.attachmentInfo[0].displayUrl="imgs/placeholder.png")})}function g(t){t.on("mouseenter",function(){$(this).children().not(".filter-closeStatus").css({color:"#E5383C","border-color":"#E5383C"}),$(this).children().find(".glyphicon-menu-down").css({transform:"rotate(180deg)"}),$(this).not(".addSearch,.selectTypes,.selectStyle,.selectBrand").find(".filter-trigger").css({height:"33px","border-bottom":"0",background:"#fff"}),$(this).find(".switch-filter").show();$(".addSearch ")&&$(".addSearch").text(),$(".switchFilter").off("click"),$(".switchFilter").on("click",function(){var t=$(this).parents(".ltype"),s=$(this).parents(".stype"),n=$(this).text(),i=$(this).attr("data-id");I(i),$(this).parent().siblings().children("span").text(n),e.styleIds=null,e.brandIds=null,e.typeIds=null,t.length>0&&($(".stype").prev().remove(),$(".stype").remove(),$(".selectType").prev().remove(),$(".selectType").remove(),e.compClassId=parseInt(i),e.subClassId=null),s.length>0&&($(".selectType").prev().remove(),$(".selectType").remove(),e.subClassId=parseInt(i),e.typeIds=null),d()})}),t.on("mouseleave",function(){$(this).children().css({color:"","border-color":""}),$(this).children().find(".glyphicon-menu-down").css({transform:""}),$(this).find(".filter-trigger").css({height:"30px","border-bottom":"1px solid #c9c9c9",background:""}),$(this).find(".switch-filter").hide()})}function b(t,s){var n='<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType '+s+'"><div class="filter-trigger filter-closeStatus" title='+t+"><span>"+t+'</span><b class="icon-close"></b></div>',i=angular.element(n),l=a(i)(e);$(".filter-status .filter-ele .addSearch_icon").length>0?angular.element($(".filter-status .filter-ele .addSearch_icon").before(l)):angular.element($(".filter-status .filter-ele").append(l))}function v(t){$(".filter-closeStatus").off("click").on("click",function(){$(this).parent().prev().remove(),$(this).parent().remove(),C();var s=$(this).parent();switch($(s).hasClass("selectTypes")&&(s="isTypes"),$(s).hasClass("addSearch")&&(s="isSearch"),$(s).hasClass("selectStyle")&&(s="isStyle"),$(s).hasClass("selectBrand")&&(s="isBrands"),s){case"isTypes":e.isTypes=!0,e.typeIds=null,e.types_moreBtn=void 0;break;case"isStyle":e.isStyle=!0,e.styleIds=null,e.style_moreBtn=void 0;break;case"isBrands":e.isBrand=!0,e.brandIds=null,e.brand_moreBtn=void 0,$(".filter-down.activeShow").removeClass("activeShow"),p();break;case"isSearch":e.componentDisplayName=null}d(),setTimeout(function(){u()},10),e.$apply(),"function"==typeof t&&t()})}function I(t){var s=e.larList,n=[],i=[];angular.forEach(s,function(s,l){s.compClassId==parseInt(t)&&angular.forEach(s.subClassInfo,function(t,s){null==t.parentId?(n.push(t),e.smaList=n):i.push(t)})})}function C(){0==$(".type-filter").length?e.isBlock=!1:e.isBlock=!0}e.isUpload=!1;var k=ApplicationConfiguration.pagesize.pageSize;e.pageSize=k,$(".upload .main .tableBody img").attr({src:"",_src:""}),$(".audit .tableBody img").attr({src:"",_src:""}),$(".component-info .clearfix .preview-big>img").attr({src:"",_src:""}),function(){$(".component-info .clearfix .preview-big>img").attr({src:"",_src:""}),layer.load(2,{shade:!1}),i.largePattern({componentDisplayName:null,status:null,compClassId:null,subClassId:null,typeIds:null,brandIds:null,styleIds:null,currentPage:1,pageSize:k}).then(function(t){setTimeout(function(){layer.closeAll("loading")},10),e.componentList=t.data.itemList,y(e.componentList),e.bigTotalItems=t.data.totalRowCount,e.pageCount=t.data.pageCount,e.currentPage=1,e.status=null,e.componentDisplayName=null,e.compClassId=null,e.subClassId=null,e.brandIds=null,e.styleIds=null,e.typeIds=null,0==e.componentList.length?($(".component-base .pagination").hide(),$(".component-base .page").hide(),$(".component-base .component-info").append("<h4 style='margin: 15% 0 0 43%;'>没有找到相关构件</h4>")):($(".component-base .pagination").show(),$(".component-base .page").show())});var t={componentDisplayName:null,status:null,compClassId:null,subClassId:null,typeIds:null,brandIds:null,styleIds:null};i.getTypeStyle(t).then(function(t){var s=t.data;void 0==s.compClassInfos||null==s.compClassInfos||0==s.compClassInfos.length?e.isType=!1:(e.typeList=s.compClassInfos,e.larList=s.compClassInfos),void 0==s.brands||null==s.brands||0==s.brands.length?(e.isBrand=!1,e.filterDown=!1,x=1):(e.isBrand=!1,e.filterDown=!0,x=0,e.brandsList=s.brands),void 0==s.styles||null==s.styles||0==s.styles.length?(e.isStyle=!1,L=1):(L=0,e.isStyle=!0,e.styleList=s.styles)})}(),l(function(){var e=$(".page").offset().top-80;$(".component-base article.componet-base-main").scroll(function(){console.log("1234");var t=$(this).scrollTop();t>=e?$(".page").addClass("pageFix"):t<e&&$(".page").removeClass("pageFix")})},100),i.getPermis().then(function(t){var s=t.data;2==BzCloudComp.GetEpType()&&""!=s&&(e.orgShow=!0),s=s.split(";");for(var n=0;n<s.length;n++)"30002003"==s[n]&&(e.isAduit=!0)});var w=0,S="",T=null;e.componentList=[],e.isType=!0,e.isStyle=!0,e.isBrand=!1,e.isSType=!1,e.isBlock=!1,e.slideListId=0;var x=0,L=0;e.filterDown=!0,e.getComponent=function(t,s){f(),e.currentPage=1;var n=$(s.target).text();$(".filter-status .filter-ele div").eq(0).html(n).attr("title",n),$(".largePattern .uploadClick .menusName").removeClass("side-active"),$(s.target).addClass("side-active"),e.status=t,e.compClassId=null,e.subClassId=null,e.brandIds=null,e.styleIds=null,e.typeIds=null,d(),e.isType=!0,e.isSType=!1,e.isTypes=!1,e.isSType=!1,h()},e.source=function(){f(),h(),e.compClassId=null,e.subClassId=null,e.brandIds=null,e.styleIds=null,e.typeIds=null,e.isType=!0,e.isSType=!1,e.isTypes=!1,e.isStyle=!0,d()},$(window).on("resize",function(){u()}),e.setPage=function(t){e.currentPage=t},e.pageChanged=function(t){$(".component-info .clearfix .preview-big>img").attr({src:"",_src:""}),i.largePattern({componentDisplayName:e.componentDisplayName,status:e.status,compClassId:e.compClassId,subClassId:e.subClassId,typeIds:e.typeIds,brandIds:e.brandIds,styleIds:e.styleIds,currentPage:t,pageSize:k}).then(function(t){e.componentList=t.data.itemList,y(e.componentList),e.bigTotalItems=t.data.totalRowCount})},e.maxSize=5;var B;e.getDumpOk=function(t,s){if(t&&13!=t.keyCode)return!1;var n=parseInt(m());if(n>s)return alert("查询页码超出范围，请重新输入"),$(".dump-inp input").val(""),!1;e.setPage(m()),$(".component-info .clearfix .preview-big>img").attr({src:"",_src:""}),i.largePattern({componentDisplayName:e.componentDisplayName,status:e.status,compClassId:e.compClassId,subClassId:e.subClassId,typeIds:e.typeIds,brandIds:e.brandIds,styleIds:e.styleIds,currentPage:n,pageSize:k}).then(function(t){e.componentList=t.data.itemList,y(e.componentList)}),$(".dump-inp input").val("")},e.search=function(t,s){if(t&&13!=t.keyCode&&10!=t.keyCode)return!1;$(".addSearch").prev(".glyphicon").remove(),$(".addSearch").remove();var n='<b class="glyphicon glyphicon-menu-right addSearch_icon"></b><div class="type-filter addSearch"><div class="filter-trigger filter-closeStatus" title='+s+"><span>"+s+'</span><b class="icon-close"></b></div>',i=angular.element(n),l=a(i)(e);angular.element($(".filter-status .filter-ele").append(l)),v("isSearch"),C(),e.componentDisplayName=s,d()},e.isBrandFilter=function(t){if("off"==e.brand_moreBtn){var s=$(t.target).parent("span.ng-scope")||$(t.target);return $(s).find(".check-box input").click(),!1}"I"!=t.target.nodeName&&"I"!=t.target.nodeName||(S=$(t.target).text(),T=$(t.target).attr("data-id"),$(".filter-status .filter-ele .addSearch_icon").length>0?$(".filter-status .filter-ele .addSearch_icon").before('<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType selectBrand"><div class="filter-trigger filter-closeStatus" title='+S+"><span>"+S+'</span><b class="icon-close"></b></div>'):$(".filter-status .filter-ele").append('<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType selectBrand"><div class="filter-trigger filter-closeStatus" title='+S+"><span>"+S+'</span><b class="icon-close"></b></div>'),e.brandIds=T,d(),p()),C(),v("isBrands")},e.isStyleFilter=function(t){if("off"==e.style_moreBtn){var s=$(t.target).parent("span.ng-scope")||$(t.target);return $(s).find(".check-box input").click(),!1}if("I"==t.target.nodeName||"I"==t.target.nodeName){var n=$(t.target).text();S=$(t.target).attr("data-id"),$(".filter-status .filter-ele .addSearch_icon").length>0?$(".filter-status .filter-ele .addSearch_icon").before('<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType selectStyle"><div class="filter-trigger filter-closeStatus" title='+n+"><span>"+n+'</span><b class="icon-close"></b></div>'):$(".filter-status .filter-ele").append('<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType selectStyle"><div class="filter-trigger filter-closeStatus" title='+n+"><span>"+n+'</span><b class="icon-close"></b></div>'),e.styleIds=S,d()}C(),v("isStyle")},e.isTypeFilter=function(t){if("SPAN"==t.target.nodeName||"span"==t.target.nodeName){S=$(t.target).not('input[type="checkbox"]').text(),T=$(t.target).not('input[type="checkbox"]').attr("data-id");e.typeList;var s='<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter ltype"><div class="filter-trigger "><span>'+S+'</span> <b class="glyphicon glyphicon-menu-down"></b> </div><div class="switch-filter" ><div class="switchFilter" style="cursor: pointer" ng-repeat="item in larList" data-id="{{item.compClassId}}">{{item.compClassName}}</div></div></div>',n=angular.element(s),i=a(n)(e);angular.element($(".filter-status .filter-first-ele").after(i)),e.compClassId=parseInt(T),e.subClassId=null,e.typeIds=null,d(),I(T),e.isType=!1,e.isSType=!0,g($(".component-base .filter-status .filter-ele .type-filter"))}C(),p()},e.isSTypeFilter=function(t){if("SPAN"==event.target.nodeName||"span"==event.target.nodeName){S=$(event.target).not('input[type="checkbox"]').text(),T=$(event.target).not('input[type="checkbox"]').attr("data-id");e.sTypeList;var s='<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter stype"><div class="filter-trigger "><span>'+S+'</span> <b class="glyphicon glyphicon-menu-down"></b> </div><div class="switch-filter" ><div class="switchFilter" style="cursor: pointer" ng-repeat="item in smaList" data-id="{{item.subClassId}}">{{item.subClassName}}</div></div></div>',n=angular.element(s),i=a(n)(e);angular.element($(".filter-status .ltype").after(i)),e.isSType=!1,e.subClassId=parseInt(T),d(),g($(".component-base .filter-status .filter-ele .type-filter"))}C()},e.seltypes=function(t,s){if("off"!=e.types_moreBtn)$(".filter-status .filter-ele .addSearch_icon").length>0?$(".filter-status .filter-ele .addSearch_icon").before('<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType selectTypes"><div class="filter-trigger filter-closeStatus" title='+t+"><span>"+t+'</span><b class="icon-close"></b></div>'):$(".filter-status .filter-ele").append('<b class="glyphicon glyphicon-menu-right"></b><div class="type-filter selectType selectTypes"><div class="filter-trigger filter-closeStatus" title='+t+"><span>"+t+'</span><b class="icon-close"></b></div>'),e.isTypes=!1,e.typeIds=s.toString(),d(),C(),v("isTypes");else{var n=$(event.target).parent("span.ng-scope")||$(event.target);$(n).find(".check-box input").click()}},e.cancelFilter=function(){$(".type-filter").remove(),$(".filter-status .filter-ele>b").remove(),e.isBlock=!1,e.isSType=!1,e.isTypes=!1,e.componentDisplayName=null,e.compClassId=null,e.subClassId=null,e.brandIds=null,e.styleIds=null,e.typeIds=null,e.searchText=null,$(".filter-condition").find(".check-box").hide(),$(".filter-condition").find(".check-box input").prop("checked",!1),$(".filter-condition").find(".btns-item").css({display:"none"}),$(".checkMore").attr("data-switch","off"),e.style_moreBtn=null,e.brand_moreBtn=null,e.types_moreBtn=null,d(),u()},l(function(){u(),$(".filter-infoList ").css({"overflow-x":"hidden","overflow-y":"auto"}),$(".filter-infoList .filter-tool").map(function(t,s){$(".component-filter").off("click",".checkMore"),$(".component-filter").on("click",".checkMore",function(){var t=$(this).attr("data-type")+"_moreBtn",s=$(this).attr("data-switch");switch(s){case"off":$(".check-box").hide(),$(".filter-infoList").css({border:"none"}),$(".filter-infoList .filter-ele").css({"max-height":"40px",overflow:"hidden"}),$(".selectTitle").css({height:"40px",background:""}),$(".btns-item").css({display:"none"}),$(".checkMore").attr("data-switch","off"),$(".filter-infoList .filter-ele").children().find(".check-box input").prop("checked",!1),$(".filter-more").addClass("showMore"),$(".filter-infoList .filter-more").find(".glyphicon-menu-up").css({transform:"rotate(180deg)"}),$(".filter-infoList .filter-more").find(".moreBtn").text("更多"),e.brand_moreBtn=null,e.style_moreBtn=null,e.types_moreBtn=null,u(),$(this).parent().parent().find(".check-box").show(),$(this).parent().parent().find(".btns-item").css({display:"block"}),$(this).attr("data-switch","on"),$(this).siblings(".filter-more").hide(),$(this).parent().parent().find(".btn-ok").hide(),e[t]=s,$(this).siblings(".filter-more").parent().parent().parent().find(".filter-ele").css({"max-height":"120px","overflow-y":"auto"});var n=$(this).parent().parent().parent().height();$(this).parent().parent().siblings(".selectTitle").css({height:n,background:"lightgoldenrodyellow"}),$(this).parent().parent().parent().css({border:"1px solid rgba(231, 179, 37, 0.31)"});break;case"on":$(this).parent().parent().find(".check-box").hide(),$(this).parent().parent().parent().find(".filter-ele").css({"max-height":"40px",overflow:"hidden"}),$(this).parent().parent().parent().css({border:"none"}),$(this).parent().parent().find(".btns-item").css({display:"none"}),$(this).attr("data-switch","off"),u(),e[t]=s,$(this).parent().parent().siblings(".selectTitle").css({height:"40px",background:""})}})}),$(".component-filter").off("click",".filter-infoList .check-box input"),$(".component-filter").on("click",".filter-infoList .check-box input",function(t){w=0;var s=[],n=[];$(this).parents(".filter-condition").find(".check-box").map(function(e,t){if(1==$(t).find('input[type="checkbox"]').prop("checked")){S=$(this).parent().children("i").text();var i=$(this).parent().children("i").attr("data-id");s.push(S),n.push(i),w=1}}),s=s.join(","),n=n.join(","),$(this).parents(".filter-condition").find(".btn-ok").off().click(function(){switch($(this).parent().siblings(".filter-ele").children().find(".check-box").hide(),$(this).parent().siblings(".filter-ele").children().find(".check-box input").prop("checked",!1),$(this).parent().siblings(".filter-tool").find(".checkMore").attr("data-switch","off"),$(this).parent().hide(),C(),$(this).attr("data-type")){case"brand":e.brandIds=n,b(s,"selectBrand"),v("isBrands"),C();break;case"style":e.styleIds=n,b(s,"selectStyle"),v("isStyle"),C();break;case"types":e.typeIds=n,b(s,"selectTypes"),v("isTypes"),C()}d(),e.$apply()}),0==w?$(this).parent().parent().parent().siblings().find(".btn-ok").hide():$(this).parent().parent().parent().siblings().find(".btn-ok").show()}),$(".component-filter").off("click",".filter-more").on("click",".filter-more",function(){$(this).hasClass("showMore")?($(this).parent().parent().parent().find(".filter-ele").css({"max-height":"120px","overflow-y":"auto"}),$(this).find(".glyphicon-menu-up").css({transform:"rotate(0deg)"}),$(this).find(".moreBtn").text("收起"),$(this).removeClass("showMore")):($(this).parent().parent().parent().find(".filter-ele").css({"max-height":"40px",overflow:"hidden"}),$(this).find(".glyphicon-menu-up").css({transform:"rotate(180deg)"}),$(this).find(".moreBtn").text("更多"),$(this).addClass("showMore"))}),$(".component-filter").off("click",".filter-infoList .btn-cancel"),$(".component-filter").on("click",".filter-infoList .btn-cancel",function(){switch($(this).parent().siblings(".filter-ele").css({"max-height":"40px",overflow:"hidden"}),$(this).parent().parent().parent().css({border:"none"}),$(this).parent().parent().siblings(".selectTitle").css({height:"40px",background:""}),$(this).parent().siblings(".filter-ele").children().find(".check-box").hide(),$(this).parent().siblings(".filter-ele").children().find(".check-box input").prop("checked",!1),$(this).parent().siblings(".filter-tool").find(".checkMore").attr("data-switch","off"),$(this).parent().hide(),u(),$(this).attr("data-type")){case"brand":e.brand_moreBtn=void 0;break;case"style":e.style_moreBtn=void 0;break;case"types":e.types_moreBtn=void 0}var t=$(this).parent().parent().height();$(this).parent().parent().siblings(".selectTitle").css({height:t,background:""}),$(this).parent().parent().parent().css({border:"none"}),e.$apply()}),u()},.1),$(".filter-down").bind("click",function(){$(this).hasClass("activeShow")?(e.isBrand=!0,$(".filter-down").find(".moreSelect").html("收起"),$(this).removeClass("activeShow")):(e.isBrand=!1,$(".filter-down").find(".moreSelect").html("更多选项"),$(this).addClass("activeShow")),e.$apply(),u()}),e.componetModal=function(t){e.items=t,n.open({windowClass:"component-modal largePattern-modal",backdrop:"static",animation:!1,size:"lg",templateUrl:"template/core/largeModal.html",controller:"largeModalCtrl",resolve:{items:function(){return e.items}}}).result.then(function(e){"deleteOk"==e&&d()},function(){})},e.uploadCom=function(){if(BzCloudComp.GetVersion){if(console.log("新版本"),""==BzCloudComp.GetUpLoadDetail())return document.title="提示",void alert("当前无可上传构件!");n.open({windowClass:"uploadCom-modal",backdrop:"static",animation:!1,size:"lg",templateUrl:"template/component/uploadCom.html",controller:"uploadComCtrl",resolve:{items:function(){return e.items}}}).result.then(function(t){e.selected=t},function(){})}else alert("客户端版本过低，请升级到最新版本！")},$(".return-top").click(function(){$(".componet-base-main").animate({scrollTop:0},500)}),i.heartBeat()}]);